name = "tmarks"
compatibility_date = "2024-03-18"
pages_build_output_dir = ".deploy"

[[d1_databases]]
binding = "DB"
database_name = "tmarks-prod-db"
database_id = "8f1898bf-bd88-4508-b560-802be9f8e756"

[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "96c7dd676c2c46969ff1c569331aaaf8"  # 需要先创建KV命名空间

[[kv_namespaces]]
binding = "PUBLIC_SHARE_KV"
id = "98731c8911cb489cb05fd8e46744f10a"  # 需要先创建KV命名空间

# Environment variables
# ⚠️ 安全警告: 敏感信息不应该提交到Git仓库!
#
# 推荐做法:
# 1. 在Cloudflare Dashboard中配置环境变量 (Settings → Environment variables)
# 2. 本地开发使用 .dev.vars 文件 (已在.gitignore中)
# 3. wrangler.toml 只保留非敏感的默认值

[vars]
ALLOW_REGISTRATION = "true"
ENVIRONMENT = "production"
JWT_ACCESS_TOKEN_EXPIRES_IN = "365d"
JWT_REFRESH_TOKEN_EXPIRES_IN = "365d"

# ⚠️ 敏感信息必须在Cloudflare Dashboard中配置:
# - JWT_SECRET (至少32个字符的随机字符串)
# - ENCRYPTION_KEY (至少32个字符的随机字符串)